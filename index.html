<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ö–∏–Ω–æ-–ö–∞—Ä—å–µ—Ä–∞ Premium</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            /* –ü—Ä–µ–º–∏–∞–ª—å–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞ */
            --bg-deep: #0a0e1a;
            --bg-overlay: rgba(10, 14, 26, 0.85);
            --glass-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.12);
            
            --gold-start: #bf953f;
            --gold-end: #fcf6ba;
            --gold-accent: #d4af37;
            
            --blue-accent: #4a90e2;
            --text-primary: #f0f0f0;
            --text-secondary: #a0a6b8;
            
            --nav-height: 70px;
        }

        /* –®—Ä–∏—Ñ—Ç—ã */
        .cinzel-font { font-family: 'Cinzel', serif; }
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--bg-deep);
            color: var(--text-primary);
            margin: 0;
            padding-bottom: calc(var(--nav-height) + 20px);
            overflow-x: hidden;
        }

        /* –§–æ–Ω —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º */
        .app-background {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            /* –ö–∞—Ä—Ç–∏–Ω–∫–∞ –∫–∏–Ω–æ–∑–∞–ª–∞ */
            background: url('https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?q=80&w=1000&auto=format&fit=crop') no-repeat center center fixed;
            background-size: cover;
            filter: blur(8px) brightness(0.4);
            z-index: -1;
        }
        /* –≠—Ñ—Ñ–µ–∫—Ç –∑–µ—Ä–Ω–∞ */
        .app-background::after {
            content: "";
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            pointer-events: none;
        }

        /* –£—Ç–∏–ª–∏—Ç—ã */
        .app-container { padding: 20px; max-width: 500px; margin: 0 auto; }
        .text-center { text-align: center; }
        .mt-3 { margin-top: 16px; }
        .accent-text { color: var(--gold-accent); }
        .hint-text { color: var(--text-secondary); font-size: 12px; }
        .gradient-text {
            background: linear-gradient(to right, var(--gold-start), var(--gold-end));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .floating-icon { animation: float 3s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        /* –°—Ç–µ–∫–ª–æ–º–æ—Ä—Ñ–∏–∑–º */
        .glass-panel, .glass-card, .reward-glass, .task-glass, .stat-glass, .my-rank-glass {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            box-shadow: 0 4px 24px -1px rgba(0, 0, 0, 0.2);
        }

        /* –°–≤–µ—á–µ–Ω–∏–µ */
        .glow-gold { box-shadow: 0 4px 24px -1px rgba(212, 175, 55, 0.15); border-color: rgba(212, 175, 55, 0.3); }
        .glow-blue { box-shadow: 0 4px 24px -1px rgba(74, 144, 226, 0.15); border-color: rgba(74, 144, 226, 0.3); }

        /* –í–∫–ª–∞–¥–∫–∏ */
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* === –ì–õ–ê–í–ù–ê–Ø === */
        .main-header { margin-bottom: 24px; }
        .user-block { display: flex; align-items: center; padding: 12px; gap: 12px; width: fit-content; }
        .avatar-small { width: 42px; height: 42px; border-radius: 50%; border: 2px solid var(--gold-accent); object-fit: cover; }
        .user-text h2 { font-size: 16px; margin: 0; }
        .season-status { font-size: 12px; }

        .league-main-card { padding: 30px 20px; text-align: center; position: relative; overflow: hidden; }
        .league-icon-wrapper { font-size: 64px; margin-bottom: 10px; text-shadow: 0 0 20px rgba(212, 175, 55, 0.4); }
        .league-title { font-size: 32px; margin: 0 0 10px 0; letter-spacing: 1px; }
        .number-large { font-size: 48px; line-height: 1; }
        .points-label { font-size: 18px; color: var(--text-secondary); }

        .progress-wrapper { margin-top: 24px; }
        .progress-info { display: flex; justify-content: space-between; font-size: 13px; margin-bottom: 8px; color: var(--text-secondary); }
        .premium-progress-bar {
            height: 14px;
            background: rgba(0,0,0,0.3);
            border-radius: 7px;
            padding: 2px;
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);
        }
        .progress-fill-gold {
            height: 100%;
            background: linear-gradient(90deg, var(--gold-start), var(--gold-accent));
            border-radius: 5px;
            position: relative;
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .progress-glow {
            position: absolute; top: 0; right: 0; bottom: 0; width: 30px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4));
            filter: blur(3px);
            animation: progressShine 2s infinite linear;
        }
        @keyframes progressShine { from { transform: translateX(-100%); } to { transform: translateX(300%); } }

        .actions-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 20px; }
        .premium-btn {
            padding: 16px; border: none; border-radius: 14px; font-family: 'Montserrat', sans-serif;
            font-weight: 600; font-size: 14px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px;
            transition: all 0.2s;
        }
        .btn-gold { background: linear-gradient(135deg, var(--gold-start), var(--gold-accent)); color: #0a0e1a; box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3); }
        .btn-glass { background: var(--glass-bg); border: 1px solid var(--glass-border); color: var(--text-primary); }
        .premium-btn:active { transform: scale(0.98); }

        /* === –†–ï–ô–¢–ò–ù–ì === */
        .my-rank-glass {
            display: flex; align-items: center; padding: 16px; margin-bottom: 20px;
            background: linear-gradient(135deg, rgba(74, 144, 226, 0.1), transparent);
        }
        .rank-number { font-size: 28px; font-weight: bold; color: var(--blue-accent); margin-right: 20px; }
        .rank-details h3 { margin: 0 0 4px 0; font-size: 16px; }

        .leaderboard-item {
            display: flex; align-items: center; padding: 14px;
            border-bottom: 1px solid var(--glass-border);
        }
        .lb-rank { width: 35px; font-weight: bold; text-align: center; }
        .top-1 { color: var(--gold-accent); font-size: 1.2em; text-shadow: 0 0 10px var(--gold-accent); }
        .lb-avatar { margin-right: 14px; border: 1px solid var(--glass-border); width: 40px; height: 40px; border-radius: 50%; object-fit: cover;}
        .lb-name { font-weight: 600; }
        .lb-league { font-size: 12px; color: var(--text-secondary); }
        .lb-points { font-weight: bold; color: var(--gold-accent); margin-left: auto;}

        /* === –ù–ê–ì–†–ê–î–´ === */
        .rewards-track { display: flex; flex-direction: column; gap: 16px; }
        .reward-glass { padding: 16px; position: relative; overflow: hidden; }
        .active-league { border: 2px solid var(--gold-accent); background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), transparent); }
        .reward-status { position: absolute; top: 12px; right: 12px; font-size: 10px; background: var(--gold-accent); color: #000; padding: 3px 8px; border-radius: 10px; font-weight: bold; }
        .reward-header { display: flex; align-items: center; gap: 16px; margin-bottom: 16px; }
        .league-emoji { font-size: 32px; }
        .grayscale { filter: grayscale(1); opacity: 0.6; }
        .reward-header h3 { margin: 0 0 4px 0; font-size: 18px; }
        .league-threshold { color: var(--text-secondary); font-size: 13px; }
        .lock-icon { margin-left: auto; color: var(--text-secondary); opacity: 0.5; }

        .reward-perks { list-style: none; padding: 0; margin: 0; }
        .reward-perks li { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; font-size: 13px; }
        .gold-icon { color: var(--gold-accent); }

        /* === –ü–†–û–§–ò–õ–¨ === */
        .profile-header { margin-bottom: 24px; }
        .profile-avatar-container {
            width: 110px; height: 110px; margin: 0 auto 16px; padding: 5px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
        }
        /* –†–∞–º–∫–∏ */
        .frame-silver { background: linear-gradient(45deg, #7f8c8d, #bdc3c7); box-shadow: 0 0 20px rgba(189, 195, 199, 0.3); }
        .frame-gold { background: linear-gradient(45deg, var(--gold-start), var(--gold-accent), var(--gold-end)); box-shadow: 0 0 25px rgba(212, 175, 55, 0.5); animation: rotateFrame 10s linear infinite; }
        @keyframes rotateFrame { from { filter: hue-rotate(0deg); } to { filter: hue-rotate(360deg); } }

        .avatar-profile { width: 100%; height: 100%; border-radius: 50%; border: 3px solid var(--bg-deep); object-fit: cover; }
        .profile-header h2 { margin: 0 0 4px 0; font-size: 22px; }
        .username-tag { color: var(--text-secondary); margin-bottom: 12px; }
        .league-tag { display: inline-block; padding: 6px 16px; font-size: 13px; font-weight: 600; color: var(--gold-accent); }

        .stats-glass-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 20px; }
        .stat-glass { padding: 16px 10px; text-align: center; display: flex; flex-direction: column; }
        .stat-num { font-size: 20px; font-weight: bold; }
        .stat-desc { font-size: 11px; color: var(--text-secondary); margin-top: 4px; }

        .referral-glass { padding: 20px; }
        .referral-glass h3 { margin: 0 0 8px 0; font-size: 16px; display: flex; align-items: center; gap: 10px; color: var(--blue-accent); }
        .ref-input-wrapper { display: flex; gap: 10px; margin-top: 16px; }
        #ref-link-input {
            flex-grow: 1; background: rgba(0,0,0,0.3); border: 1px solid var(--glass-border);
            color: var(--gold-accent); padding: 12px; border-radius: 10px; font-family: monospace; outline: none;
        }
        .copy-premium-btn {
            background: var(--blue-accent); color: #fff; border: none; width: 44px; border-radius: 10px; cursor: pointer; font-size: 18px;
            box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3); transition: transform 0.2s;
        }
        .copy-premium-btn:active { transform: scale(0.90); }

        /* === –ó–ê–î–ê–ù–ò–Ø === */
        .back-glass-btn { background: var(--glass-bg); border: 1px solid var(--glass-border); color: var(--text-primary); padding: 8px 16px; border-radius: 20px; cursor: pointer; display: flex; align-items: center; gap: 8px; margin-bottom: 16px; backdrop-filter: blur(10px); }
        .tasks-grid { display: grid; grid-template-columns: 1fr; gap: 12px; }
        .task-glass { display: flex; align-items: center; padding: 16px; gap: 16px; }
        .task-icon-bg { width: 44px; height: 44px; background: rgba(255,255,255,0.1); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 20px; }
        .gold-bg { background: linear-gradient(135deg, rgba(212, 175, 55, 0.2), transparent); }
        .blue-bg { background: linear-gradient(135deg, rgba(74, 144, 226, 0.2), transparent); }
        .task-details h4 { margin: 0 0 4px 0; font-size: 15px; }
        .task-points { margin-left: auto; font-weight: bold; font-size: 16px; color: var(--text-secondary); }
        .gold-points { color: var(--gold-accent); text-shadow: 0 0 10px rgba(212, 175, 55, 0.5); }
        .blue-points { color: var(--blue-accent); }
        .premium-task-glow { box-shadow: 0 4px 20px -5px rgba(212, 175, 55, 0.2); border-color: rgba(212, 175, 55, 0.3); }

        /* === –ü–ê–†–Ø–©–ê–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø === */
        .floating-nav {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 450px; height: var(--nav-height);
            display: flex; justify-content: space-around; align-items: center;
            border-radius: 35px; z-index: 100;
            background: rgba(20, 25, 40, 0.8);
            box-shadow: 0 10px 30px -5px rgba(0,0,0,0.5);
        }
        .nav-link {
            display: flex; flex-direction: column; align-items: center; text-decoration: none;
            color: var(--text-secondary); font-size: 10px; transition: all 0.3s; position: relative;
            width: 60px;
        }
        .nav-link i { font-size: 20px; margin-bottom: 4px; transition: all 0.3s; }
        .nav-link.active { color: var(--gold-accent); }
        .nav-link.active i { transform: translateY(-4px); text-shadow: 0 0 15px var(--gold-accent); }
        .nav-link.active::after {
            content: ''; position: absolute; bottom: -10px; width: 6px; height: 6px;
            background: var(--gold-accent); border-radius: 50%; box-shadow: 0 0 10px var(--gold-accent);
        }
        /* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ */
        .centered-link { transform: translateY(-20px); }
        .center-icon-bg {
            width: 60px; height: 60px; background: linear-gradient(135deg, var(--gold-start), var(--gold-accent));
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.4); border: 4px solid var(--bg-deep);
        }
        .centered-link i { color: #0a0e1a; font-size: 24px; margin: 0; }
    </style>
</head>
<body>
    <div class="app-background"></div>

    <main class="app-container">
        <section id="tab-main" class="tab-content active fade-in">
            <header class="main-header">
                <div class="user-block glass-panel">
                    <img src="https://via.placeholder.com/50" alt="Avatar" id="header-avatar" class="avatar-small">
                    <div class="user-text">
                        <h2 id="header-username" class="cinzel-font">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                        <span class="season-status gradient-text">–°–µ–∑–æ–Ω 2026: –í —Ä–∞–∑–≥–∞—Ä–µ</span>
                    </div>
                </div>
            </header>

            <div class="league-main-card glass-card glow-gold">
                <div class="league-icon-wrapper">
                    <span id="current-league-icon" class="floating-icon">üé¨</span>
                </div>
                <h1 class="league-title cinzel-font" id="current-league-name">–ö–ò–ù–û–ú–ê–ù</h1>
                <div class="points-counter">
                    <span id="current-points" class="gradient-text number-large">145</span>
                    <span class="points-label">–±–∞–ª–ª–æ–≤</span>
                </div>
                
                <div class="progress-wrapper">
                    <div class="progress-info">
                        <span>–ü—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–≤–Ω—è</span>
                        <span id="next-league-target" class="accent-text">–¶–µ–ª—å: –ö—Ä–∏—Ç–∏–∫ (–µ—â–µ 15)</span>
                    </div>
                    <div class="premium-progress-bar">
                        <div class="progress-fill-gold" id="main-progress-fill" style="width: 72%;">
                            <div class="progress-glow"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="actions-grid">
                <button class="premium-btn btn-gold" onclick="openTab('tab-tasks')">
                    <i class="fa-solid fa-star"></i> –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–ª—ã
                </button>
                 <button class="premium-btn btn-glass" onclick="Telegram.WebApp.openLink('https://t.me/kinoitochca')">
                    <i class="fa-brands fa-telegram"></i> –í –∫–∞–Ω–∞–ª
                </button>
            </div>
        </section>

        <section id="tab-leaderboard" class="tab-content fade-in">
            <header class="section-header text-center">
                <h2 class="cinzel-font gradient-text">–ó–∞–ª –°–ª–∞–≤—ã</h2>
                <p>–¢–û–ü-10 —Å–µ–∑–æ–Ω–∞</p>
            </header>

            <div class="my-rank-glass glow-blue">
                <div class="rank-number cinzel-font">#<span id="my-rank">42</span></div>
                <div class="rank-details">
                    <h3>–ú–æ—è –ø–æ–∑–∏—Ü–∏—è</h3>
                    <p>–û—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ: <span class="accent-text" id="points-gap">12 –±.</span></p>
                </div>
            </div>

            <div class="leaderboard-list glass-panel" id="leaderboard-container">
            </div>
             <p class="hint-text text-center mt-3">–î–ª—è —É—á–∞—Å—Ç–∏—è –≤ –¢–û–ü –Ω—É–∂–Ω–∞ –º–∏–Ω–∏–º—É–º 1 –ø–æ–∫—É–ø–∫–∞ Premium.</p>
        </section>

        <section id="tab-rewards" class="tab-content fade-in">
             <header class="section-header text-center">
                <h2 class="cinzel-font gradient-text">–ü—É—Ç—å –∫ –û—Å–∫–∞—Ä—É</h2>
                <p>–õ–∏–≥–∏ –∏ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏</p>
            </header>

            <div class="rewards-track">
                <div class="reward-glass active-league glow-gold">
                    <div class="reward-status">–¢–µ–∫—É—â–∞—è –ª–∏–≥–∞</div>
                    <div class="reward-header">
                        <span class="league-emoji">üé¨</span>
                        <div>
                            <h3 class="cinzel-font">–ö–∏–Ω–æ–º–∞–Ω</h3>
                            <span class="league-threshold">–æ—Ç 10 –±–∞–ª–ª–æ–≤</span>
                        </div>
                    </div>
                    <ul class="reward-perks">
                        <li><i class="fa-solid fa-check gold-icon"></i> 7 –¥–Ω–µ–π Premium</li>
                        <li><i class="fa-solid fa-check gold-icon"></i> –°–µ—Ä–µ–±—Ä—è–Ω–∞—è —Ä–∞–º–∫–∞</li>
                    </ul>
                </div>
                <div class="reward-glass next-league locked">
                    <div class="reward-header">
                        <span class="league-emoji grayscale">‚úçÔ∏è</span>
                        <div>
                            <h3 class="cinzel-font">–ö—Ä–∏—Ç–∏–∫</h3>
                            <span class="league-threshold">–æ—Ç 25 –±–∞–ª–ª–æ–≤</span>
                        </div>
                         <i class="fa-solid fa-lock lock-icon"></i>
                    </div>
                    <ul class="reward-perks">
                        <li>14 –¥–Ω–µ–π Premium</li>
                        <li>–ó–æ–ª–æ—Ç–∞—è —Ä–∞–º–∫–∞</li>
                        <li>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫ AI</li>
                    </ul>
                </div>
                 <div class="reward-glass locked">
                    <div class="reward-header">
                        <span class="league-emoji grayscale">üëë</span>
                        <div>
                            <h3 class="cinzel-font">–õ–µ–≥–µ–Ω–¥–∞</h3>
                            <span class="league-threshold">150 –±–∞–ª–ª–æ–≤</span>
                        </div>
                        <i class="fa-solid fa-lock lock-icon"></i>
                    </div>
                     <ul class="reward-perks">
                        <li>3 –º–µ—Å—è—Ü–∞ Premium</li>
                        <li>VIP —Å—Ç–∞—Ç—É—Å –Ω–∞–≤—Å–µ–≥–¥–∞</li>
                         <li>–ó–∞–ª —Å–ª–∞–≤—ã</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="tab-profile" class="tab-content fade-in">
            <div class="profile-header text-center">
                <div class="profile-avatar-container" id="profile-frame-container">
                    <img src="https://via.placeholder.com/100" alt="Avatar" id="profile-avatar" class="avatar-profile">
                </div>
                <h2 id="profile-fullname" class="cinzel-font">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                <p class="username-tag" id="profile-username">@username</p>
                 <div class="league-tag glass-panel" id="profile-league-badge">üé¨ –ö–∏–Ω–æ–º–∞–Ω</div>
            </div>

            <div class="stats-glass-grid">
                <div class="stat-glass">
                    <span class="stat-num gradient-text" id="stat-points">145</span>
                    <span class="stat-desc">–ë–∞–ª–ª–æ–≤</span>
                </div>
                 <div class="stat-glass">
                    <span class="stat-num" id="stat-invites">12</span>
                    <span class="stat-desc">–î—Ä—É–∑–µ–π</span>
                </div>
                 <div class="stat-glass">
                    <span class="stat-num" id="stat-premium">2</span>
                    <span class="stat-desc">Premium –ø–æ–∫—É–ø–æ–∫</span>
                </div>
            </div>

            <div class="referral-glass glass-card glow-blue">
                <h3 class="cinzel-font"><i class="fa-solid fa-link"></i> –ò–Ω–≤–∞–π—Ç-—Å—Å—ã–ª–∫–∞</h3>
                <p>–¢–≤–æ–π –±–∏–ª–µ—Ç –≤ –≤—ã—Å—à—É—é –ª–∏–≥—É. –î–µ–ª–∏—Å—å –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π.</p>
                <div class="ref-input-wrapper">
                    <input type="text" id="ref-link-input" readonly value="...">
                    <button class="copy-premium-btn" id="copy-ref-btn">
                        <i class="fa-regular fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

         <section id="tab-tasks" class="tab-content fade-in">
            <header class="section-header">
               <button class="back-glass-btn" onclick="openTab('tab-main')"><i class="fa-solid fa-chevron-left"></i> –ù–∞–∑–∞–¥</button>
               <h2 class="cinzel-font">–¶–µ–Ω—Ç—Ä –ó–∞–¥–∞–Ω–∏–π</h2>
           </header>
           <div class="tasks-grid">
               <div class="task-glass">
                   <div class="task-icon-bg">üìÖ</div>
                   <div class="task-details">
                       <h4>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å 7 –¥–Ω–µ–π</h4>
                       <p>–ó–∞—Ö–æ–¥–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ.</p>
                   </div>
                   <div class="task-points">+2</div>
               </div>
               <div class="task-glass premium-task-glow">
                   <div class="task-icon-bg gold-bg">üíé</div>
                   <div class="task-details">
                       <h4 class="gradient-text">–ö—É–ø–∏—Ç—å Premium</h4>
                       <p>–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç. –†–∞–∑ –≤ 30 –¥–Ω–µ–π.</p>
                   </div>
                   <div class="task-points gold-points">+5</div>
               </div>
               <div class="task-glass highlight-task-glow">
                   <div class="task-icon-bg blue-bg">üë•</div>
                   <div class="task-details">
                       <h4>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞</h4>
                       <p>–ê–∫—Ç–∏–≤–µ–Ω 7 –¥–Ω–µ–π.</p>
                   </div>
                   <div class="task-points blue-points">+2</div>
               </div>
           </div>
       </section>

    </main>

    <nav class="floating-nav glass-panel">
        <a href="#" class="nav-link active" data-target="tab-main">
            <i class="fa-solid fa-film"></i>
            <span>–ì–ª–∞–≤–Ω–∞—è</span>
        </a>
        <a href="#" class="nav-link" data-target="tab-leaderboard">
            <i class="fa-solid fa-ranking-star"></i>
            <span>–†–µ–π—Ç–∏–Ω–≥</span>
        </a>
        <a href="#" class="nav-link centered-link" data-target="tab-rewards">
            <div class="center-icon-bg">
                <i class="fa-solid fa-gem"></i>
            </div>
        </a>
        <a href="#" class="nav-link" data-target="tab-tasks">
             <i class="fa-solid fa-list-check"></i>
            <span>–ó–∞–¥–∞–Ω–∏—è</span>
        </a>
        <a href="#" class="nav-link" data-target="tab-profile">
            <i class="fa-regular fa-circle-user"></i>
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </a>
    </nav>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.setHeaderColor('#0a0e1a'); 
        tg.setBackgroundColor('#0a0e1a');

        // MOCK DATA
        const MOCK_USER_DATA = {
            tg_id: tg.initDataUnsafe?.user?.id || 123456,
            first_name: tg.initDataUnsafe?.user?.first_name || "–ö–∏–Ω–æ–º–∞–Ω",
            last_name: tg.initDataUnsafe?.user?.last_name || "",
            username: tg.initDataUnsafe?.user?.username || "kinoman_user",
            photo_url: tg.initDataUnsafe?.user?.photo_url || "https://i.pravatar.cc/150?img=68",
            season_points: 145,
            league_id: 2, 
            stats: { invites: 12, premium_bought: 2 },
            rank: 42,
            points_to_next_rank: 12,
            bot_username: "kinoitochca_bot" 
        };

        const LEAGUES = [
            { id: 0, name: "–ó—Ä–∏—Ç–µ–ª—å", threshold: 0, icon: "üëÄ", next_threshold: 10, frame: null },
            { id: 1, name: "–ö–∏–Ω–æ–º–∞–Ω", threshold: 10, icon: "üé¨", next_threshold: 25, frame: "frame-silver" },
            { id: 2, name: "–ö—Ä–∏—Ç–∏–∫", threshold: 25, icon: "‚úçÔ∏è", next_threshold: 50, frame: "frame-gold" },
            { id: 3, name: "–ü—Ä–æ–¥—é—Å–µ—Ä", threshold: 50, icon: "üí∞", next_threshold: 90, frame: "frame-gold" },
            { id: 4, name: "–†–µ–∂–∏—Å—Å—ë—Ä", threshold: 90, icon: "üé•", next_threshold: 150, frame: "frame-gold" },
            { id: 5, name: "–õ–µ–≥–µ–Ω–¥–∞", threshold: 150, icon: "üëë", next_threshold: null, frame: "frame-gold" }
        ];

        const MOCK_LEADERBOARD = [
            { rank: 1, name: "KinoKing", points: 320, league: "–õ–µ–≥–µ–Ω–¥–∞", avatar: "https://i.pravatar.cc/50?img=11" },
            { rank: 2, name: "Eva Green", points: 295, league: "–õ–µ–≥–µ–Ω–¥–∞", avatar: "https://i.pravatar.cc/50?img=5" },
            { rank: 3, name: "Producer Max", points: 250, league: "–†–µ–∂–∏—Å—Å—ë—Ä", avatar: "https://i.pravatar.cc/50?img=3" },
            { rank: 41, name: "–°—ç–º", points: 157, league: "–õ–µ–≥–µ–Ω–¥–∞", avatar: "https://i.pravatar.cc/50?img=8" },
            { rank: 43, name: "–ê–Ω–Ω–∞", points: 140, league: "–ö–∏–Ω–æ–º–∞–Ω", avatar: "https://i.pravatar.cc/50?img=9" }
        ];

        function initApp() {
            populateUserData();
            setupNavigation();
            loadLeaderboard();
            setupReferralCopy();
            document.querySelector('.app-container').style.opacity = 1;
        }

        function populateUserData() {
            const user = MOCK_USER_DATA;
            const currentLeague = LEAGUES.find(l => l.id === user.league_id);
            const nextLeague = LEAGUES.find(l => l.id === user.league_id + 1);
            const fullName = `${user.first_name} ${user.last_name}`.trim();

            document.getElementById('header-username').textContent = fullName;
            document.getElementById('profile-fullname').textContent = fullName;
            document.getElementById('profile-username').textContent = user.username ? `@${user.username}` : "";

            const avatarEls = [document.getElementById('header-avatar'), document.getElementById('profile-avatar')];
            avatarEls.forEach(el => el.src = user.photo_url);

            document.getElementById('current-league-icon').textContent = currentLeague.icon;
            document.getElementById('current-league-name').textContent = currentLeague.name;
            document.getElementById('current-points').textContent = user.season_points;

            if (nextLeague) {
                const pointsNeeded = nextLeague.threshold - user.season_points;
                document.getElementById('next-league-target').textContent = `–¶–µ–ª—å: ${nextLeague.name} (–µ—â–µ ${pointsNeeded})`;
                
                const leagueRange = nextLeague.threshold - currentLeague.threshold;
                const userProgressInOutRange = user.season_points - currentLeague.threshold;
                const progressPercent = (userProgressInOutRange / leagueRange) * 100;
                document.getElementById('main-progress-fill').style.width = `${Math.max(8, progressPercent)}%`;
            } else {
                document.getElementById('next-league-target').textContent = "–ê–±—Å–æ–ª—é—Ç–Ω—ã–π —á–µ–º–ø–∏–æ–Ω!";
                document.getElementById('main-progress-fill').style.width = '100%';
            }

            const frameContainer = document.getElementById('profile-frame-container');
            frameContainer.classList.remove('frame-silver', 'frame-gold');
            if (currentLeague.frame) {
                frameContainer.classList.add(currentLeague.frame);
            }
            document.getElementById('profile-league-badge').textContent = `${currentLeague.icon} ${currentLeague.name}`;

            document.getElementById('stat-points').textContent = user.season_points;
            document.getElementById('stat-invites').textContent = user.stats.invites;
            document.getElementById('stat-premium').textContent = user.stats.premium_bought;

            const refLink = `https://t.me/${user.bot_username}?start=ref_${user.tg_id}`;
            document.getElementById('ref-link-input').value = refLink;

            document.getElementById('my-rank').textContent = user.rank;
            document.getElementById('points-gap').textContent = `${user.points_to_next_rank} –±.`;
        }

        function setupNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    const targetId = link.getAttribute('data-target');
                    if(targetId) {
                         e.preventDefault();
                         openTab(targetId);
                    }
                });
            });
        }

        window.openTab = function(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active', 'fade-in');
            });
            document.querySelectorAll('.nav-link').forEach(nav => {
                nav.classList.remove('active');
            });

            const targetTab = document.getElementById(tabId);
            targetTab.classList.add('active');
            setTimeout(() => targetTab.classList.add('fade-in'), 10);

            const activeNavLink = document.querySelector(`.nav-link[data-target="${tabId}"]`);
            if (activeNavLink) {
                activeNavLink.classList.add('active');
            }
            tg.HapticFeedback.impactOccurred('light');
        };

        function loadLeaderboard() {
            const container = document.getElementById('leaderboard-container');
            container.innerHTML = ''; 
            let combinedList = [...MOCK_LEADERBOARD];

            combinedList.forEach(user => {
                let rankDisplay = `#${user.rank}`;
                let rankClass = '';
                if (user.rank === 1) { rankDisplay = 'ü•á'; rankClass = 'top-1'; }
                else if (user.rank === 2) rankDisplay = 'ü•à';
                else if (user.rank === 3) rankDisplay = 'ü•â';
                
                const itemHtml = `
                    <div class="leaderboard-item">
                        <div class="lb-rank ${rankClass}">${rankDisplay}</div>
                        <img src="${user.avatar}" alt="${user.name}" class="lb-avatar">
                        <div class="lb-info">
                            <div class="lb-name">${user.name}</div>
                            <div class="lb-league">${user.league}</div>
                        </div>
                        <div class="lb-points">${user.points}</div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', itemHtml);
            });
        }

        function setupReferralCopy() {
            const copyBtn = document.getElementById('copy-ref-btn');
            const linkInput = document.getElementById('ref-link-input');

            copyBtn.addEventListener('click', () => {
                linkInput.select();
                linkInput.setSelectionRange(0, 99999); 

                try {
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                         navigator.clipboard.writeText(linkInput.value).then(onCopySuccess);
                    } else {
                        document.execCommand('copy');
                        onCopySuccess();
                    }
                } catch (err) {
                    tg.showPopup({ title: '–û—à–∏–±–∫–∞', message: '–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é.' });
                }
            });
        }

        function onCopySuccess() {
            tg.showPopup({ title: '–ì–æ—Ç–æ–≤–æ!', message: '–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞.' });
            tg.HapticFeedback.notificationOccurred('success');
        }

        tg.ready();
        initApp();
    </script>
</body>
</html>
